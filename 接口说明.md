## æœåŠ¡å®‰è£…é¡µ
- è·å–å·²æœ‰æµæ°´çº¿
	- æ¥å£ï¼šget_dag_workflows_api 
	- get è¯·æ±‚
```
[
	{
		"dag_id":1,
		"dag_name":"headup",
		"dag":["face_detection","face_alignment"]
	},
	{
		"dag_id":2,
		"dag_name":"traffic",
		"dag":["car_detection","plate_recognition"]
	},
	{
		"dag_id":1,
		"dag_name":"ixpe",
		"dag":["ixpe_preprocess","ixpe_sr_and_pc","ixpe_edge_observe"]
	}
                
]
```

- è·å–æœåŠ¡ç±»å‹ï¼ˆç”¨æ¥ç»„è£…æµæ°´çº¿ï¼‰
	- æ¥å£ï¼šget_all_service
	- get è¯·æ±‚
```
["face_detection","face_alignment","car_detection","helmet_detection","ixpe_preprocess","ixpe_sr_and_pc","ixpe_edge_observe"]
```

- æ–°å¢æœåŠ¡æµæ°´çº¿
	- æ¥å£ update_dag_workflows_api
	- post è¯·æ±‚
```
{
	"dag_name":'face',
	"dag":[]
}


```

```
{
	state:'success'/'fail',
	msg:'...'
}
```

- åˆ é™¤æµæ°´çº¿  post âœ”ï¸
	- æ¥å£ï¼šdelete_dag_workflow
	- post è¯·æ±‚
```
body
{
	"dag_id":1
}
```

```
{
	state:'success'/'fail',
	msg:'...'
}
```


- è·å–å·²å®‰è£…æµæ°´çº¿ï¼ˆå…¶å®åŒ get_dag_workflows_apiï¼Œå†å²é—ç•™ğŸ™ƒï¼‰
	- æ¥å£ /task
	- get è¯·æ±‚
```
[
	{
		"dag_id":"1",
		"dag_name":"face"
	},
	{
		"dag_id":"2"
		"dag_name":"car"
	}
]
```

- æœåŠ¡å®‰è£…çŠ¶æ€
	- /install_state
	- get è¯·æ±‚
		- install åˆ™è¡¨ç¤ºå·²å®‰è£…ï¼Œç¦æ­¢å®‰è£…ï¼Œå¯ kill
		- uninstall åˆ™å¯å®‰è£…ï¼Œç¦æ­¢ kill
```
{
	'state':'install/uninstall'
}
```

- é€‰æ‹©ä»»åŠ¡åè·å–é˜¶æ®µæ•°åŠå¯é€‰é•œåƒ
	- /get_task_stage/{dag_id} 
	- get 
```
[
	{
		'dag_id':'1',
		'image_list':[
			{
				'image_name':'onecheck/face_detection:v1',
				"url":"..."
			},
		]
	},
]
```

- å®‰è£…æœåŠ¡
	- /install
	- post è¯·æ±‚
```
{
	"task_name": "face",
	"image_list": ["", ""]
}
```

```
{
	'state':'success' / 'fail'
	'msg': 'service start successfully'
}
```

- å·²å®‰è£…æœåŠ¡ï¼ˆç”¨æ¥æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„èµ„æºä½¿ç”¨æƒ…å†µï¼‰
	- /get_service_list
	- get è¯·æ±‚
```
["face_detection", "..."]
```

- è·å–æœåŠ¡çš„èµ„æºä½¿ç”¨æƒ…å†µ
	- /get_execute_url/{service}
	- get
```
[
	{
		"ip":"114.212.81.11",
		"hostname":"edge1",
		"cpu":"20%",
		"memory":"20%",
		"bandwidth":"1MB/s",
		"age":"10m",
	}
]
```

- ç»ˆæ­¢æœåŠ¡
	- /stop_service
	- post æ–¹æ³•
```
{
	'state':"success/fail",
	'msg':'...'
}
```
## æäº¤ä»»åŠ¡é¡µ
- æŸ¥çœ‹æ˜¯å¦å·²ç»å¼€å¯è¿‡è§†é¢‘æµ 
	- get 
	- /query_state
```
{
	'state':'open/close',
	'source_label':''
}
```

- æ–°å¢æ•°æ®æº
	- æ¥å£ /datasource_config
	- post
```
body:file

{
	state:'success'/'fail',
	msg:'...'
}

```

- è·å–æ•°æ®æºä¿¡æ¯
	- æ¥å£/node/get_video_info
	- get è¯·æ±‚
```
    [
        {
            "source_label": "car",
            "source_name": "äº¤é€šç›‘æ§æ‘„åƒå¤´",
            "source_type"": "è§†é¢‘æµ",
            "camera_list":[
                {
                    "name": "æ‘„åƒå¤´1",
                    "url": "rtsp/114.212.81.11...",
                    "describe":"æŸåå­—è·¯å£",
                    "resolution": "1080p",
                    "fps":"25fps",
                    "importance":0.6
                },
                {
                    "name": "æ‘„åƒå¤´2",
                    "url": "rtsp/114.212.81.11...",
                    "describe":"æŸåå­—è·¯å£2",
                    "resolution": "1080p",
                    "fps":"15fps"
                }
            ]
        }

    ]
```

- æäº¤ä»»åŠ¡ 
	- post 
	- /query/submit_query
```
{
	'source_label':'car',
	"delay_cons":"0.6",
	"acc_cons":"0.6",
	"urgency": "0.1",
	"importance":"0.9"
}
```

```
{
	'state':"success/fail",
	'msg':'...'
}
```

- ç»ˆæ­¢ä»»åŠ¡ 
	- post 
	- /stop_query
```
{
	'source_label':'...'
}
```

```
{
	'state':"success/fail",
	'msg':'...'
}
```